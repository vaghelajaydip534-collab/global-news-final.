<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & BRANDING -->
    <title>Global Time’s – Stay Ahead. Stay Informed.</title>
    <meta name="description" content="Global Time’s: Your essential daily briefing. We aggregate top news sources from around the world to keep you ahead and informed with breaking news, analysis, and headlines.">
    <meta name="keywords" content="world news, breaking news, news aggregator, headlines, global times, tech news, business news, politics, finance">
    <meta name="author" content="Global Time's">
    <meta name="robots" content="index, follow">
    <link rel="icon" href="https://via.placeholder.com/32x32.png?text=GT" type="image/png">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Global Time’s – Stay Ahead. Stay Informed.">
    <meta property="og:description" content="The ultimate news aggregator for global headlines, analysis, and breaking stories.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630.png?text=Global+Time’s">
    <meta property="og:url" content="https://your-website-url.com">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Global Time's">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Main Stylesheet -->
    <style>
        /* CSS RESET & DEFAULTS */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        
        /* THEME & COLOR PALETTE (DARK MODE ONLY) */
        :root {
            --accent: #E63946;
            --font-headline: 'Playfair Display', serif;
            --font-body: 'Roboto', sans-serif;
            --border-radius: 12px;
            --transition-main: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            
            /* Dark Theme Variables */
            --bg: #121212;
            --text-primary: #EAEAEA;
            --text-secondary: #aaa;
            --header-bg: rgba(10, 25, 47, 0.85);
            --card-bg: #162447;
            --footer-bg: #0A192F;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
            --logo-glow: 0 0 15px rgba(230, 57, 70, 0.7);
            --skeleton-bg: #2a2a2a;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg);
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        /* ANIMATIONS */
        .fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        /* HEADER */
        .header {
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            padding: 1rem 2.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(128, 128, 128, 0.1);
        }
        .header .logo { font-family: var(--font-headline); font-size: 2rem; color: var(--accent); text-shadow: var(--logo-glow); }
        .header-nav { display: flex; align-items: center; gap: 2rem; }
        .nav-links a {
            cursor: pointer;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            position: relative;
            transition: color 0.3s ease;
            padding-bottom: 5px;
        }
        .nav-links a.active { color: var(--accent); }
        .nav-links a.active::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--accent);
        }

        /* LANDING PAGE SECTION */
        .landing-page {
            display: flex; align-items: center; justify-content: center; text-align: center;
            min-height: 90vh; padding: 4rem 2rem; position: relative; overflow: hidden;
        }
        .landing-page::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://www.svgrepo.com/show/506793/world-map.svg');
            background-repeat: no-repeat; background-position: center; background-size: contain; opacity: 0.05; transform: scale(1.1);
        }
        .landing-content { position: relative; z-index: 1; max-width: 800px; }
        .landing-content h1 { font-family: var(--font-headline); font-size: clamp(2.5rem, 5vw, 4.5rem); line-height: 1.1; margin-bottom: 1.5rem; }
        .landing-content p { font-size: clamp(1rem, 2.5vw, 1.3rem); color: var(--text-secondary); margin-bottom: 2.5rem; }
        
        /* --- BUTTON GLITCH FIX HERE --- */
        .cta-button {
            font-size: 1.1rem;
            font-weight: 700;
            text-decoration: none;
            color: #fff;
            background-color: var(--accent);
            padding: 1rem 2.5rem;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(230, 57, 70, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            /* This property hints the browser to optimize animations, fixing the "glitch" */
            will-change: transform, box-shadow;
        }
        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(230, 57, 70, 0.5);
        }
        
        #news-section { padding-top: 4rem; margin-top: -2rem; }
        
        /* ADS & MAIN LAYOUT */
        .ad-placeholder { display: flex; justify-content: center; align-items: center; margin: 1.5rem auto; background-color: var(--card-bg); border: 2px dashed var(--text-secondary); color: var(--text-secondary); }
        .ad-728x90 { width: 728px; height: 90px; }
        .ad-300x250 { width: 300px; height: 250px; }
        .ad-320x100 { display: none; }
        .container { display: flex; padding: 2rem 2.5rem; gap: 2rem; max-width: 1400px; margin: 0 auto; }
        .main-content { flex-grow: 1; }
        #news-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 2rem; }
        .sidebar { width: 300px; flex-shrink: 0; }

        /* NEWS CARD */
        .news-card { background-color: var(--card-bg); border-radius: var(--border-radius); box-shadow: var(--shadow); overflow: hidden; display: flex; flex-direction: column; transition: transform var(--transition-main), box-shadow var(--transition-main); }
        .news-card:hover { transform: translateY(-8px); box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15); }
        .news-card-image { width: 100%; height: 200px; object-fit: cover; background-color: var(--skeleton-bg); }
        .news-card-content { padding: 1.5rem; display: flex; flex-direction: column; flex-grow: 1; }
        .news-card-content h3 { font-family: var(--font-headline); font-size: 1.4rem; line-height: 1.3; margin-bottom: 1rem; min-height: 5.4rem; }
        .read-more { margin-top: auto; text-decoration: none; background-color: var(--accent); color: #fff; padding: 0.75rem 1.5rem; border-radius: 8px; text-align: center; font-weight: 500; transition: background-color var(--transition-main), transform var(--transition-main); }
        .read-more:hover { background-color: #c42d38; transform: scale(1.05); }

        /* SKELETON LOADER */
        @keyframes skeleton-loading { 0% { background-color: var(--skeleton-bg); opacity: 0.6; } 100% { background-color: var(--skeleton-bg); opacity: 1; } }
        .skeleton-card .skeleton-image { height: 200px; animation: skeleton-loading 1.2s linear infinite alternate; }
        .skeleton-card .skeleton-text { height: 1em; margin-bottom: 0.75rem; border-radius: 4px; animation: skeleton-loading 1.2s linear infinite alternate; }

        /* FOOTER */
        .footer { background: var(--footer-bg); color: var(--text-primary); padding: 4rem 2.5rem 2rem; margin-top: 3rem; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 2rem; max-width: 1200px; margin: 0 auto; padding-bottom: 3rem; border-bottom: 1px solid rgba(128, 128, 128, 0.2); }
        .footer-column h4 { font-family: var(--font-headline); font-size: 1.5rem; margin-bottom: 1.5rem; }
        .footer-column p, .footer-column a { color: var(--text-secondary); text-decoration: none; }
        .footer-column ul { list-style: none; }
        .footer-column li { margin-bottom: 0.75rem; }
        .footer-column a:hover { color: var(--accent); }
        .footer-bottom { max-width: 1200px; margin: 2rem auto 0; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .social-links a { margin: 0 0.5rem; display: inline-block; }
        .social-links svg { width: 24px; height: 24px; fill: var(--text-secondary); transition: fill 0.3s ease, transform 0.3s ease; }
        .social-links a:hover svg { fill: var(--accent); transform: scale(1.2); }

        /* RESPONSIVE */
        @media (max-width: 992px) { .sidebar { display: none; } .header, .container, .footer { padding: 1.5rem; } .nav-links { display: none; } }
        @media (max-width: 768px) { .ad-728x90 { display: none; } .ad-320x100 { display: flex; width: 320px; height: 100px; } .footer-content { grid-template-columns: 1fr; text-align: center; } .footer-bottom { flex-direction: column; gap: 1.5rem; } }
    </style>
</head>
<body>

    <!-- HEADER with Category Navigation -->
    <header class="header">
        <div class="logo">Global Time’s</div>
        <nav class="header-nav">
            <div class="nav-links" id="category-nav">
                <a data-category="general" class="active">Top Headlines</a>
                <a data-category="business">Business</a>
                <a data-category="technology">Technology</a>
                <a data-category="entertainment">Entertainment</a>
                <a data-category="sports">Sports</a>
            </div>
        </nav>
    </header>

    <main>
        <!-- LANDING PAGE -->
        <section class="landing-page fade-in">
            <div class="landing-content">
                <h1>Stay Ahead. Stay Informed.</h1>
                <p>Your essential daily briefing from trusted sources worldwide. We deliver the news that matters, right to your screen.</p>
                <a href="#news-section" class="cta-button">View Latest Headlines</a>
            </div>
        </section>

        <!-- NEWS SECTION -->
        <section id="news-section">
            <div class="ad-placeholder ad-728x90">
                <!-- INSERT ADSTERRA 728x90 CODE HERE -->
                728x90 Ad Placeholder
            </div>
            <div class="container">
                <div class="main-content">
                    <div id="news-grid">
                        <!-- Skeleton loader cards are injected here by JavaScript -->
                    </div>
                </div>
                <aside class="sidebar fade-in">
                    <div class="ad-placeholder ad-300x250">
                        <!-- INSERT ADSTERRA 300x250 CODE HERE -->
                        300x250 Ad Placeholder
                    </div>
                </aside>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer fade-in">
        <div class="footer-content">
            <div class="footer-column"><h4>Global Time’s</h4><p>Delivering unbiased news from across the globe.</p></div>
            <div class="footer-column"><h4>Categories</h4><ul><li><a href="#">World Affairs</a></li><li><a href="#">Business & Finance</a></li><li><a href="#">Technology Trends</a></li><li><a href="#">Sports Highlights</a></li></ul></div>
            <div class="footer-column"><h4>Company</h4><ul><li><a href="#">About Us</a></li><li><a href="#">Contact</a></li><li><a href="#">Privacy Policy</a></li></ul></div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Global Time’s. All Rights Reserved.</p>
            <div class="social-links">
                <a href="#" aria-label="Twitter"><svg viewBox="0 0 24 24"><path d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.39.106-.803.163-1.227.163-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg></a>
                <a href="#" aria-label="LinkedIn"><svg viewBox="0 0 24 24"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.98v16h4.98v-8.396c0-2.018 1.226-3.268 2.982-3.268 1.534 0 2.518 1.025 2.518 3.268v8.396h4.98v-10.396c0-3.766-2.599-5.824-5.281-5.824-2.103 0-3.361 1.193-3.951 2.336h.022v-1.956h-4.98v16z"/></svg></a>
            </div>
        </div>
    </footer>

    <script>
    // JavaScript code remains exactly the same, no changes needed here.
    document.addEventListener('DOMContentLoaded', () => {

        const newsGrid = document.getElementById('news-grid');
        const categoryNav = document.getElementById('category-nav');
        const cacheKey = 'globalTimesNewsCache';
        const cacheDuration = 10 * 60 * 1000; // 10 minutes

        // --- SMOOTH SCROLL FOR CTA & CATEGORY LINKS ---
        document.querySelector('.cta-button').addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector(e.target.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
        });

        // --- CATEGORY SELECTION LOGIC ---
        categoryNav.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
                const category = e.target.dataset.category;
                categoryNav.querySelector('.active').classList.remove('active');
                e.target.classList.add('active');
                loadNews(category);
            }
        });

        const loadNews = async (category = 'general') => {
            const currentCacheKey = `${cacheKey}_${category}`;
            const cached = JSON.parse(localStorage.getItem(currentCacheKey));

            if (cached && (Date.now() - cached.timestamp < cacheDuration)) {
                console.log(`Loading ${category} news from cache.`);
                displayNews(cached.articles);
                return;
            }

            console.log(`Fetching fresh ${category} news.`);
            showSkeletonLoaders();
            
            try {
                const response = await fetch(`/.netlify/functions/get-news?category=${category}`);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const allArticles = await response.json();
                const uniqueArticles = [...new Map(allArticles.map(item => [item.title, item])).values()].slice(0, 50);

                localStorage.setItem(currentCacheKey, JSON.stringify({ timestamp: Date.now(), articles: uniqueArticles }));
                displayNews(uniqueArticles);

            } catch (error) {
                console.error("Failed to fetch news:", error);
                newsGrid.innerHTML = `<p style="color: var(--text-secondary);">Could not retrieve news at this moment. Please check your connection or try again later.</p>`;
            }
        };

        const showSkeletonLoaders = () => {
            newsGrid.innerHTML = Array(9).fill('').map(() => `
                <div class="news-card skeleton-card">
                    <div class="skeleton-image"></div>
                    <div class="news-card-content">
                        <div class="skeleton-text" style="width: 100%; height: 1.4rem; margin-bottom: 1rem;"></div>
                        <div class="skeleton-text" style="width: 90%; height: 1.4rem; margin-bottom: 1rem;"></div>
                        <div class="skeleton-text" style="width: 70%; height: 1.4rem;"></div>
                    </div>
                </div>`
            ).join('');
        };

        const displayNews = (articles) => {
            newsGrid.innerHTML = '';
            if (!articles || articles.length === 0) {
                newsGrid.innerHTML = `<p style="color: var(--text-secondary);">No articles found for this category.</p>`;
                return;
            }
            articles.forEach((article, index) => {
                const card = document.createElement('div');
                card.className = 'news-card fade-in';
                card.innerHTML = `
                    <img class="news-card-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="${article.imageUrl}" alt="${article.title}" loading="lazy">
                    <div class="news-card-content">
                        <h3>${article.title}</h3>
                        <a href="${article.url}" target="_blank" rel="noopener noreferrer" class="read-more">Read Full Story</a>
                    </div>`;
                newsGrid.appendChild(card);
                if ((index + 1) % 5 === 0) {
                    const ad = document.createElement('div');
                    ad.className = 'ad-placeholder ad-320x100';
                    ad.innerHTML = `<!-- INSERT ADSTERRA 320x100 CODE HERE --> 320x100 Ad Placeholder`;
                    newsGrid.appendChild(ad);
                }
            });
            initLazyLoad();
            initFadeIn();
        };

        const lazyLoadObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    observer.unobserve(img);
                }
            });
        }, { rootMargin: "0px 0px 200px 0px" });

        const fadeInObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        const initLazyLoad = () => document.querySelectorAll('img[data-src]').forEach(img => lazyLoadObserver.observe(img));
        const initFadeIn = () => document.querySelectorAll('.fade-in').forEach(el => fadeInObserver.observe(el));
        
        const init = () => {
            loadNews();
            initFadeIn();
        };
        init();
    });
    </script>
</body>
</html>